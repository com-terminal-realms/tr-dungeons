// AUTO-GENERATED by orb-schema-generator v1.3.0 - DO NOT EDIT
// Regenerate with: orb-schema generate
/**
 * GraphQL utilities for AWSTimestamp conversion.
 *
 * AWSTimestamp is a Unix timestamp in seconds, but TypeScript uses Date objects.
 * Use toGraphQLInput() before sending data to GraphQL mutations.
 * Use fromGraphQLTimestamp() when receiving AWSTimestamp from GraphQL responses.
 */

/**
 * Convert Date fields to Unix timestamps for GraphQL AWSTimestamp compatibility.
 * Recursively handles nested objects and arrays.
 *
 * @param input - Object with potential Date fields
 * @returns Object with Date fields converted to Unix epoch seconds
 *
 * @example
 * const input = toGraphQLInput({
 *   name: 'John',
 *   createdAt: new Date(),
 *   metadata: { updatedAt: new Date() }
 * });
 * // Result: { name: 'John', createdAt: 1705500000, metadata: { updatedAt: 1705500000 } }
 */
export function toGraphQLInput<T extends Record<string, unknown>>(input: T): T {
  const result: Record<string, unknown> = {};

  for (const [key, value] of Object.entries(input)) {
    if (value instanceof Date) {
      result[key] = Math.floor(value.getTime() / 1000);
    } else if (Array.isArray(value)) {
      result[key] = value.map((item) =>
        item instanceof Date
          ? Math.floor(item.getTime() / 1000)
          : typeof item === 'object' && item !== null
            ? toGraphQLInput(item as Record<string, unknown>)
            : item
      );
    } else if (typeof value === 'object' && value !== null) {
      result[key] = toGraphQLInput(value as Record<string, unknown>);
    } else {
      result[key] = value;
    }
  }

  return result as T;
}

/**
 * Convert Unix timestamp from GraphQL AWSTimestamp to JavaScript Date.
 *
 * @param timestamp - Unix timestamp in seconds (from GraphQL AWSTimestamp)
 * @returns JavaScript Date object, or null if input is null/undefined
 *
 * @example
 * const date = fromGraphQLTimestamp(1705500000);
 * // Result: Date object representing 2024-01-17T...
 */
export function fromGraphQLTimestamp(timestamp: number | null | undefined): Date | null {
  if (timestamp == null) {
    return null;
  }
  return new Date(timestamp * 1000);
}