[gd_scene load_steps=8 format=3 uid="uid://enemy_base_scene_001"]

[ext_resource type="Script" path="res://scenes/enemies/enemy_base.gd" id="1"]
[ext_resource type="Script" path="res://scripts/components/health.gd" id="2"]
[ext_resource type="Script" path="res://scripts/components/movement.gd" id="3"]
[ext_resource type="Script" path="res://scripts/components/combat.gd" id="4"]
[ext_resource type="Script" path="res://scripts/components/enemy_ai.gd" id="5"]
[ext_resource type="PackedScene" uid="uid://health_bar_scene_001" path="res://scenes/ui/health_bar.tscn" id="6"]
[ext_resource type="PackedScene" uid="uid://detection_indicator_001" path="res://scenes/ui/detection_indicator.tscn" id="7"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_enemy"]
radius = 0.4
height = 1.8

[sub_resource type="StandardMaterial3D" id="Material_enemy"]
albedo_color = Color(0, 0.5, 1, 1)

[sub_resource type="CapsuleShape3D" id="CapsuleShape_enemy"]
radius = 0.4
height = 1.8

[node name="EnemyBase" type="CharacterBody3D" groups=["enemies"]]
script = ExtResource("1")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0)
mesh = SubResource("CapsuleMesh_enemy")
surface_material_override/0 = SubResource("Material_enemy")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0)
shape = SubResource("CapsuleShape_enemy")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
path_desired_distance = 0.5
target_desired_distance = 0.5
path_max_distance = 3.0
avoidance_enabled = true
radius = 0.5

[node name="Health" type="Node" parent="."]
script = ExtResource("2")
max_health = 50

[node name="Movement" type="Node" parent="."]
script = ExtResource("3")
move_speed = 3.0
rotation_speed = 8.0

[node name="Combat" type="Node" parent="."]
script = ExtResource("4")
attack_damage = 5
attack_range = 1.5
attack_cooldown = 1.5

[node name="EnemyAI" type="Node" parent="."]
script = ExtResource("5")
detection_range = 10.0

[node name="HealthBarUI" parent="." instance=ExtResource("6")]
health_component = NodePath("../Health")
offset_y = 2.2

[node name="DetectionIndicator" parent="." instance=ExtResource("7")]
offset_y = 2.5
